{% extends 'base/base.html' %}

{% block title %}Update Production Order{% endblock title %}

{% block head %}
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<style>
    .select2-container {
        width: 100% !important;
    }
    .select2-container .select2-selection--single {
        height: 38px !important;
        padding: 6px;
    }
    .select2-selection__arrow {
        height: 38px !important;
    }
</style>
{% endblock head %}

{% block content %}
<div class="container mt-4">
    <div class="card shadow-sm border-0">
        <div class="card-header">
            <strong class="card-title">Update Production Order</strong>
        </div>
        <div class="card-body">
            <form action="#" id="submitform" method="post" enctype="multipart/form-data">
                {% csrf_token %}

                <!-- Basic Order Info -->
                <div class="row">
                    <div class="col-md-6">{{ form.customer.label_tag }} {{ form.customer }}</div>
                    <div class="col-md-6">{{ form.purchase_no.label_tag }} {{ form.purchase_no }}</div>
                </div>

                <div class="row mt-3">
                    <div class="col-md-4">{{ form.order_id.label_tag }} {{ form.order_id }}</div>
                    <div class="col-md-4">{{ form.order_type.label_tag }} {{ form.order_type }}</div>
                    <div class="col-md-4">{{ form.priority.label_tag }} {{ form.priority }}</div>
                </div>

                <div class="row mt-3">
                    <div class="col-md-4">{{ form.delivery_type.label_tag }} {{ form.delivery_type }}</div>
                    <div class="col-md-4">{{ form.delivery_date.label_tag }} {{ form.delivery_date }}</div>
                    <div class="col-md-4">{{ form.status.label_tag }} {{ form.status }}</div>
                </div>

                <!-- Designer Section -->
                

                <!-- Production Section -->
                <div style="border: 1px solid black; padding: 20px; margin: 24px 9px; position: relative;">
                    <div style="position: absolute; top: -12px; left: 50%; transform: translateX(-50%);
                                background: white; padding: 0 10px; font-weight: bold;">
                        Production Details
                    </div>

                    <div class="row mt-3">
                        <div class="col-md-4">{{ form.stage.label_tag }} {{ form.stage }}</div>
                        <div class="col-md-4">{{ form.hold_reason.label_tag }} {{ form.hold_reason }}</div>
                        <div class="col-md-4">{{ form.assigned_employees.label_tag }} {{ form.assigned_employees }}</div>
                    </div>

                    <div class="row mt-3">
                        <div class="col-md-4">{{ form.start_date.label_tag }} {{ form.start_date }}</div>
                        <div class="col-md-4">{{ form.expected_end_date.label_tag }} {{ form.expected_end_date }}</div>
                    </div>

                    <div class="row mt-3">
                        <div class="col-md-12">{{ form.remarks.label_tag }} {{ form.remarks }}</div>
                    </div>
                </div>

                <div class="mt-4">
                    <button type="submit" class="btn btn-primary w-100">Update</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock content %}

{% block js %}
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script>
    $(document).ready(function() {
        $('#id_assigned_employees').select2({
            placeholder: "Select employees",
            allowClear: true
        });
    });
</script>
{% endblock js %}

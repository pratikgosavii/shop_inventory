{% extends 'base/quotation_base.html' %}

{% load static %}

{% block title %}Create Product{% endblock title %}

{% block head %}


</head>

<style>


    #loader-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.3); /* Light grey with opacity */
        z-index: 9999; /* Ensure it stays on top */
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    #loader {
        background-color: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }

    


    hr{
    margin-top: 10px !important;
    margin-bottom: 10px !important;
    border: 0;
    border-top: None  !important;
    }


    .ssdsds {
        background-color: #b0ffb0;;
    }

    .ssdsds{
    color: black;
    font-weight: 400;
    margin-left: 18px;
    left: 10px;

    background-color: white;
    }



    #video {
        display: none;
    }


  
    .form-group {
        display: flex;
        align-items: center;
    }
    .form-group label {
        flex: 1;
        margin-bottom: 0;
        white-space: nowrap; /* Prevent label from wrapping */
        margin-right: 10px; /* Add space between label and input */
        margin: 10px 0px !important;
    }
    label {
        flex: 1;
        margin-bottom: 0;
        font-weight : 200 !important;
        white-space: nowrap; /* Prevent label from wrapping */
        margin-right: 10px; /* Add space between label and input */
    }
    

    .form-control{
        margin: 10px 0px !important;

    }




    @media print {

        #header{
            display: none;
        }

        #total_sq_inch_label{
            display: none;
        }

        #total_sq_inch_text{
            display: none;
        }

        #submitButton{
            display: none;
        }

        #payment-button{
            display: none;
        }

        #left-panel{
            display: none;
        }

        #right-panel{
            margin-left: 0px !important;
        }


        .no-print {
            display: none !important;
          }


          th, td {
            -webkit-print-color-adjust: exact; 
            print-color-adjust: exact;
          }


    }
    


    label {
        flex: 1;
        margin-bottom: 0;
        font-weight: 600 !important;
    }

    .card {
        display: flow;
        padding: 10px;
        border-radius: 12px;
        margin-bottom: 0.6em;
    }

    @media print {
        body {
          -webkit-print-color-adjust: exact; /* For WebKit browsers */
          color-adjust: exact; /* For other browsers */
        }
      
        .printable {
          background-color: #f0f0f0;
          color: #333;
          padding: 10px;
          border: 1px solid #ccc;
        }
      
        .no-print {
          display: none;
        }
      }
    
    
</style>

{% endblock head %}

{% block content %}


<!-- Modal HTML -->
<div id="myModal" class="modal fade">
	<div class="modal-dialog modal-confirm">
		<div class="modal-content">
			<div class="modal-header">
				<div class="icon-box">
					<i class="material-icons">&#xE876;</i>
				</div>				
				<h4 class="modal-title w-100">Awesome!</h4>	
			</div>
			<div class="modal-body">
				<p class="text-center">Your booking has been confirmed. Check your email for detials.</p>
			</div>
			<div class="modal-footer">
				<button class="btn btn-success btn-block" data-dismiss="modal">OK</button>
			</div>
		</div>
	</div>
</div>     


<div class="row">
    <div class="col-lg-12">
        <div class="">

            <h1 id="messagingSenderId"> </h1>
            
            <div class="col-12">

                    <div class="col-3">
                        <img src="{% static 'images/logo.png' %}" alt="Logo" style="height: 96px; margin-right: 10px;">
                    </div>

                    <div class="col-9 card" style="font-size: 23px; border: 1px solid black; text-align: center; padding: 10px; color: white; font-weight: bolder; background: #003366; display: flex; align-items: center; justify-content: center;">
                        Techno - Commercial Offer
                    </div>
            </div>
            

              <br>


              <div id="loader-overlay" style="display: none;">
                <div id="loader">
                    <img src="{% static '/images/loader.gif' %}" alt="Loading..." style="width: 50px; height: 50px;">
                </div>
            </div>
            

              <div class="sufee-alert alert with-close alert-danger alert-dismissible fade show" style="display: none;">
                <span class="badge badge-pill badge-danger">Error</span>
                <span id="errorMessage"></span>
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">Ã—</span>
                </button>
            </div>

            <div class="row">
                <div class="col-12" style="">
                    <form id="form3" style="display: contents; comehere">
                        {% csrf_token %}

                        <h1 id="token"> </h1>

                        <div class="" style="justify-content: left;">

                            <div class="card" style="border: 1px solid black; padding: 9px 6px;">

                                <div style="display:flex;">
                                    <label style="margin: 10px 0px !important;" for="customer" class="control-label mb-1">Customer Name</label>
                                    {{ form.customer }}     
                                    <input type="button" style="background: #003366; color:white; margin:10px;" value="Add"  data-toggle="modal" data-target="#popupFormModal">
                                    
                                </div>
                                
                            
                                
                                <div style="display:flex;">
                                    <label style="margin: 10px 0px !important;" for="contance_person_no" class="control-label mb-1">Contact Person Name</label>
                                    <!-- Use the  attribute to make the input field read-only -->
                                    <input style="margin-left:10px !important;" name="contance_person_no" id="contance_person_no" type="text" value="" class="form-control" >
                                </div>
                                
                                <div style="display:flex;">
                                    <label style="margin: 10px 0px !important;" for="contact_no" class="control-label mb-1">Mobile Number</label>
                                    <!-- Use the  attribute to make the input field read-only -->
                                    <input style="margin-left:10px !important;" name="contact_no" id="contact_no" type="number" value="" class="form-control" >
                                </div>
                                
                                <div style="display:flex;">
                                    <label style="margin: 10px 0px !important;" for="email" class="control-label mb-1">Contact Email</label>
                                    <!-- Use the  attribute to make the input field read-only -->
                                    <input style="margin-left:10px !important;" name="email" id="email" type="text" value="" class="form-control" >
                                </div>
                                

                            </div>
                        </div>

                        <div class="" style="justify-content: right;">


                            <div style="" class="card">

                                {% comment %} <div style="display: flex; display: flex; border: 1px solid black; padding: 9px 6px;">
                                    <label style="margin: 10px 0px !important;" for="name" class="control-label mb-1">Offer No</label>
                                    <input type="text" style="margin-left:10px !important;" value="{{ form.order_id.value }}" class="form-control" readonly>
                                </div> {% endcomment %}

                                <div style="display: flex; border: 1px solid black; padding: 9px 6px;">
                                    <label style="margin: 10px 0px !important;" for="date" class="control-label mb-1">Offer Date</label>
                                    <!-- Use the readonly attribute to make the input field read-only -->
                                    <input style="margin-left:10px !important;" name="date" id="date" type="datetime-local" value="{{ date|date:'Y-m-d\TH:i' }}" class="form-control" readonly>
                                </div>
                                


                                <div style="display: flex; display: flex; border: 1px solid black; padding: 9px 6px;">
                                    <label style="margin: 10px 0px !important;" for="reference_from" class="control-label mb-1">Reference From</label>

                                    <div>
                                            
                                        <div>

                                            <input type="radio" id="conctc" value="Direct_Contact" name="reference_from">
                                            <label style="margin: 10px 0px !important;"  for="conctc">Direct Contact</label>
                                        </div>

                                        <div>
                                            <input type="radio" id="webs" value="Webiste" name="reference_from">
                                            <label style="margin: 10px 0px !important;"  for="webs">Webiste</label>
                                        </div>

                                        <div>
                                            <input type="radio" id="mailrt" value="Mailer" name="reference_from">
                                            <label style="margin: 10px 0px !important;" for="mailrt">Mailer</label>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </form>

                    </div>
                </div>
               
            </div>

            
                <div style="justify-content: center;display: grid;" class="no-print">
                    <div class="">
                        <form id="orderForm" style="display: contents; comehere">
                            {% csrf_token %}
                            

                                

                            <p style="color: white; text-align: center;color: white;margin-bottom: 0px;border-radius: 10px 10px 0px 0px;padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;"> Item Code/ Drawing Number/ Project Number </p>

                            <div class="card">

                                <input type="textbox" name="item_code" id="item_code" class="form-control" id="checkbox1" required>
                            </div>
                            <p style="color: white; text-align: center;color: white;margin-bottom: 0px;border-radius: 10px 10px 0px 0px;padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;"> Materials </p>
                                
                            <input type="hidden" style="margin-left:10px !important;" name="order" value="{{ form.order_id.value }}">


                            <input type="hidden" id="editOrderId">


                            <div class="card">

                                <input type="radio" id="ss_304" value="ss_304" name="material" required>
                                <label for="ss_304">SS 304</label>

                                    <input type="radio" id="ss_316" value="ss_316" name="material" required>
                                    <label for="ss_316">SS 316</label>

                                    <input type="radio" id="ss_316_L" value="ss_316_L" name="material" required>
                                    <label for="ss_316_L">SS 316 L</label>

                                    <input type="radio" id="aluminium_coil" value="aluminium_coil" name="material" required>
                                    <label for="aluminium_coil">Aluminium Coil</label>

                                    <input type="radio" id="sheet_2S" value="sheet_2S" name="material" required>
                                    <label for="sheet_2S">Sheet 2S</label>

                                    <input type="radio" id="brass" value="brass" name="material" required>
                                    <label for="brass">Brass</label>

                                    <input type="radio" id="copper" value="copper" name="material" required>
                                    <label for="copper">Copper</label>

                                    <input type="radio" id="mild_sheel" value="mild_sheel" name="material" required>
                                    <label for="mild_sheel">Mild Sheel</label>

                                    <input type="radio" id="spring_sheel" value="spring_sheel" name="material" required>
                                    <label for="spring_sheel">Spring Sheel</label>

                                    <input type="radio" id="nickel" value="nickel" name="material" required>
                                    <label for="nickel">Nickel</label>

                                    <input type="radio" id="beryllium_copper" value="beryllium_copper" name="material" required>
                                    <label for="beryllium_copper">Beryllium Copper</label>

                                    <input type="radio" id="trifoliate_sandwich" value="trifoliate_sandwich" name="material" required>
                                    <label for="trifoliate_sandwich">Trifoliate sandwich</label>

                                    <label for="checkbox1"> Any Other please mention</label>
                                    <input type="textbox" name="other_material" class="form-control" id="checkbox1">

                                </div>
                                </div>

                                <p style="color: white; text-align: center;color: white;margin-bottom: 0px;border-radius: 10px 10px 0px 0px; left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;"> Process </p>
                            
                                {% comment %} #2b1b83 {% endcomment %}
                                <div class="card">


                                        {% for i in process_data %}
                                    
                                            <input type="radio" id="process{{ i.id }}" value="{{ i.id }}" name="process" required>
                                            <label for="process{{ i.id }}">{{ i.name }}</label>
    
                                        {% endfor %}
    


                                </div>

                               

                                <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
                                    border-radius: 10px 10px 0px 0px;
                                    padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;">  Size of Nameplate , Precision Parts & Laser Cutting in Inch </p>
                                                        

                                <div class="card">
                                    
                                    <div style="display: flex; gap : 20px;">
                                        <label for="length_a">Length</label>
                                        <input type="number" name="length" class="form-control" id="length_a" required>
                                        <select id="mm_inch_select"> 
                                            <option value="1"> MM </option>
                                            <option value="2"> Inch </option>
                                            </select>
                                    </div>
                                    

                                    <div style="display: flex; gap : 20px;">
                                        <label for="width_a">Width</label>
                                        <input type="number" name="width" class="form-control" id="width_a" required>
                                    </div>
                                    

                                    <label for="quantity_a"> Total Qty in Number</label>
                                    <input type="number" class="form-control" name="quantity" id="quantity_a" required>

                                    <label for="total_sq_inch"> Total Sq Inch </label>
                                    <input type="textbox" class="form-control" name="total_sq_inch" id="total_sq_inch" required>

                                </div>

                                <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
                                border-radius: 10px 10px 0px 0px;
                                padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;"> MOQ For nameplates in sq. inch </p>
                                            

                            <div>
                                <div class="card">

                                    <input type="radio" id="checkbox144" value="144" name="sqinch" required>
                                    <label for="checkbox144">144</label>

                                    
                                    <input type="radio" id="checkbox2" value="288" name="sqinch" required>
                                    <label for="checkbox2">288</label>
                                    
                                    <input type="radio" id="checkbox3" value="432" name="sqinch" required>
                                    <label for="checkbox3">432</label>
                                
                                </div>

                                <div class="card">

                                    <input type="radio" id="checkbox3" value="576" name="sqinch" required>
                                    <label for="checkbox3">576</label>
                                    
                                </div>
                                                        
                                <div class="card">

                                    <input type="radio" id="checkbox4" value="720" name="sqinch" required>
                                    <label for="checkbox4">720</label>

                                    <input type="radio" id="checkbox4" value="864" name="sqinch" required>
                                    <label for="checkbox4">864</label>

                                    <input type="radio" id="checkbox4" value="1008" name="sqinch" required>
                                    <label for="checkbox4">1008</label>
                                    
                                    <input type="radio" id="checkbox5" value="1152" name="sqinch" required>
                                    <label for="checkbox5">1152</label> <span style="color: red;font-weight: bolder;font-size: 20px;"> || </span> 
                                    
                                    <input type="radio" id="checkbox6" value="1296" name="sqinch" required>
                                    <label for="checkbox6">1296</label>
                                    
                                    <input type="radio" id="checkbox7" value="1440" name="sqinch" required>
                                    <label for="checkbox7">1440</label>
                                    
                                    <input type="radio" id="checkbox8" value="1584" name="sqinch" required>
                                    <label for="checkbox8">1584</label>

                                    <input type="radio" id="checkbox9" value="1728" name="sqinch" required>
                                    <label for="checkbox9">1728</label> <span style="color: red;font-weight: bolder;font-size: 20px;"> || </span> 
                                    
                                </div>

                                                            
                                <div class="card">

                                    <input type="radio" id="checkbox10" value="1872" name="sqinch" required>
                                    <label for="checkbox10">1872</label>
                                
                                    <input type="radio" id="checkbox12" value="2016" name="sqinch" required>
                                    <label for="checkbox12">2016</label>

                                    <input type="radio" id="checkbox13" value="2160" name="sqinch" required>
                                    <label for="checkbox13">2160</label>
                                    
                                    <input type="radio" id="checkbox14" value="2304" name="sqinch" required>
                                    <label for="checkbox41">2304</label> <span style="color: red;font-weight: bolder;font-size: 20px;"> || </span> 
                                    
                                    <input type="radio" id="checkbox15" value="2448" name="sqinch" required>
                                    <label for="checkbox15">2448</label>
                                    
                                    <input type="radio" id="checkbox16" value="2592" name="sqinch" required>
                                    <label for="checkbox16">2592</label>
                                    
                                    <input type="radio" id="checkbox17" value="2736" name="sqinch" required>
                                    <label for="checkbox17">2736</label>
                                    
                                    <input type="radio" id="checkbox17" value="2880" name="sqinch" required>
                                    <label for="checkbox17">2880</label> <span style="color: red;font-weight: bolder;font-size: 20px;"> || </span> 
                                    
                                </div>

                                                            
                                <div class="card">

                                    <input type="radio" id="checkbox18" value="3024" name="sqinch" required>
                                    <label for="checkbox18">3024</label>

                                    <input type="radio" id="checkbox19" value="3168" name="sqinch" required>
                                    <label for="checkbox19">3168</label>
                                    
                                    <input type="radio" id="checkbox20" value="3312" name="sqinch" required>
                                    <label for="checkbox20">3312</label>
                                    
                                    <input type="radio" id="checkbox21" value="3456" name="sqinch" required>
                                    <label for="checkbox21">3456</label> <span style="color: red;font-weight: bolder;font-size: 20px;"> || </span>
                                    
                                    <input type="radio" id="checkbox22" value="3600" name="sqinch" required>
                                    <label for="checkbox22">3600</label>
                                    
                                    <input type="radio" id="checkbox23" value="3744" name="sqinch" required>
                                    <label for="checkbox23">3744</label>

                                    <input type="radio" id="checkbox23" value="3888" name="sqinch" required>
                                    <label for="checkbox23">3888</label>
                                    
                                    <input type="radio" id="checkbox24" value="4032" name="sqinch" required>
                                    <label for="checkbox24">4032</label> <span style="color: red;font-weight: bolder;font-size: 20px;"> || </span>
                                    
                                    <input type="radio" id="checkbox25" value="4176" name="sqinch" required>
                                    <label for="checkbox25">4176</label>
                                    
                                    <input type="radio" id="checkbox26" value="4320" name="sqinch" required>
                                    <label for="checkbox26">4320</label> 
                                    
                                    <input type="radio" id="checkbox26" value="4464" name="sqinch" required>
                                    <label for="checkbox26">4464</label> 
                                    
                                </div>
                                    

                                <div class="card">                 


                                    <input type="radio" id="checkbox27" value="4608" name="sqinch" required>
                                    <label for="checkbox27">4608</label> <span style="color: red;font-weight: bolder;font-size: 20px;"> || </span> 
                                </div>

                            </div>

                                <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
    border-radius: 10px 10px 0px 0px;
    padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;"> Text Matter </p>
                                                    
                                <div  class="card">

                                    {% for i in text_matter_data %}
                                
                                        <input type="radio" id="text_matter{{ i.id }}" value="{{ i.id }}" name="text_matter" required>
                                        <label for="text_matter{{ i.id }}">{{ i.name }}</label>

                                    {% endfor %}

                                </div>       
                                
                                <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
    border-radius: 10px 10px 0px 0px;
    padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;">Type of Etching </p>
                                                        
                                <div  class="card">
                                    
                                    {% for i in etching_data %}
                                    
                                    <input type="radio" id="deep_etching{{ i.id }}" value="{{ i.id }}" name="etching" required>
                                    <label for="deep_etching{{ i.id }}">{{ i.name }}g</label>

                                {% endfor %}



                                </div>


                                <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
    border-radius: 10px 10px 0px 0px;
    padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;"> Color Avaiable for Nameplate, Metal Business Card </p>
                                                    
                            
                                <div class="card">

                                    {% for i in color_data %}
        
                                    <input type="radio" value="{{ i.id }}" id="color_count{{ i.id }}" name="color_count" required>
                                    <label for="color_count{{ i.id }}">{{ i.name }}</label>
        
                                    {% endfor %}
        
                                </div>
                        
                                            
                        

                                <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
    border-radius: 10px 10px 0px 0px;
    padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;"> Color (Silk Screen Printed Or Power Coated for Metal Business Card) on Nameplate , Metal Business Card </p>
                        

                                <div class="card">

                                    <input type="radio" id="color_choose1" value="black" name="color" required>
                                    <label for="color_choose1">Black</label>

                                    <input type="radio" id="color_choose2" value="blue" name="color" required>
                                    <label for="color_choose2">Blue</label>

                                    <input type="radio" id="color_choose3" value="red" name="color" required>
                                    <label for="color_choose3">Red</label>

                                    <input type="radio" id="color_choose4" value="green" name="color" required>
                                    <label for="color_choose4">Green</label>

                                    <input type="radio" id="color_choose5" value="yellow" name="color" required>
                                    <label for="color_choose5">Yellow</label>
                                
                                </div>

                                <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
    border-radius: 10px 10px 0px 0px;
    padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;">   Font height in mm for all types of Nameplate </p>
                            

                                <div class="card">
                                    
                                    <input type="radio" id="font_heightid1" value="1" name="font_height" required>
                                    <label for="font_heightid1">1</label>
                                    
                                    <input type="radio" id="font_heightid2" value="2" name="font_height" required>
                                    <label for="font_heightid2">2</label>
                                    
                                    <input type="radio" id="font_heightid3" value="3" name="font_height" required>
                                    <label for="font_heightid3">3</label>
                                    
                                    <input type="radio" id="font_heightid4" value="4" name="font_height" required>
                                    <label for="font_heightid4">4</label>
                                    
                                    <input type="radio" id="font_heightid5" value="5" name="font_height" required>
                                    <label for="font_heightid5">5</label>
                                    
                                    <input type="radio" id="font_heightid6" value="6" name="font_height" required>
                                    <label for="font_heightid6">6</label>
                                    
                                    <input type="radio" id="font_heightid7" value="7" name="font_height" required>
                                    <label for="font_heightid7">7</label>

                                    <input type="radio" id="font_heightid8" value="8" name="font_height" required>
                                    <label for="font_heightid8">8</label>
                                    
                                    <input type="radio" id="font_heightid9" value="above_8" name="font_height" required>
                                    <label for="font_heightid9">Above 8</label>

                                    <input type="radio" id="font_heightid10" value="combination_of_1to8" name="font_height" required>
                                    <label for="font_heightid10">Combination of 1 to 8</label>
                                    
                                        

                                </div>

                            
                                <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
    border-radius: 10px 10px 0px 0px;
    padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;"> Thickness </p>
                                                
                        
                                <div class="card">
        
                                    {% for i in thickness_data %}
                                    
                                        <input type="radio" value="{{ i.id }}" id="thickness{{ i.id }}" name="thickness" required>
                                        <label for="thickness{{ i.id }}" value="checkbox1">{{ i.name }}</label>
                                    
                                    {% endfor %}
                                
                                </div>

                            


                




                                <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
    border-radius: 10px 10px 0px 0px;
    padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;">  Below MOQ for  Nameplates, Precision Parts in sq. inch </p>

                                <div>
                                    
                                    <select class="form-control" name="range_mrq" id="below_moq">
                                        <!-- Options will be generated dynamically here -->
                                    </select>

                
                                </div>
                                </hr>

                    

                                <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
    border-radius: 10px 10px 0px 0px;
    padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;"> Rate Per unit in INR for Nameplates, As per MOQ</p>

                                <div class="card">

                                    
                                    <input type="textbox" name="rate_per_unit" id="total_rate" class="form-control">

                                    <div>

                                        <label for="total_basic_amount"> Basic Amount</label>

                                        <input type="hidden" name="rate" id="rate" >
                                        
                                        <input type="textbox" name="basic_amount" id="total_basic_amount" class="form-control" required>

                                    </div>
                                </div>

                        

                                <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
    border-radius: 10px 10px 0px 0px;
    padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;"> GST (IGST, SGST)</p>

                                <div  class="card">


                                    <div>
                                        <input type="radio" id="with_material_gst" value="with_gst" name="charges_type_group" required>
                                        <label for="with_material_gst">With Material GST @18%</label>
                                    </div>
                                    <div>
                                        <label for="total_with_gst">Total With GST</label>
                                        <input type="text" name="total_with_gst" id="total_with_gst" class="form-control" readonly>
                                    </div>
                                
                                    <div>
                                        <input type="radio" name="charges_type_group" value="with_job_shop" id="with_job_shop_radio" required>
                                        <label for="with_job_shop_radio">With Labour Charges GST @12%</label>
                                        <div>
                                            <label for="total_with_job_shop">Total</label>
                                            <input type="text" name="total_with_job_shop" id="total_with_job_shop" class="form-control" readonly>
                                        </div>
                                    </div>
                                    </div>

                                    <div class="card">
                                        
                                <label for="total_amount_with_charges_type"> Total Amount </label>
                                
                                <input type="text" name="total_amount_with_charges_type" id="total_amount_with_charges_type" class="form-control">
                            


                                    </div>
                        
                            

                                </hr>

                                
                                <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
    border-radius: 10px 10px 0px 0px;
    padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;">  Film Charges / Development Charges </p>
                                
                                <div class="card">

                                    
                                    <input type="radio" id="no_flim_charges1" value="no_flim_charges" name="flim_charges" required >
                                    <label for="no_flim_charges1">No Charges</label>

                                    <input type="radio" id="flim_charges1" value="inclusive" name="flim_charges" required >
                                    <label for="flim_charges1">Inclusive</label>

                                    <input type="radio" id="sqinch_flim_option" value="sqinch" name="flim_charges" required>
                                    <label for="sqinch_flim_option"> Sq Inch </label>
                                    

                                        <select id="sqinch" name="flim_sqinch"></select>
                                
                                    <label for="flim_charges_total"> Extra Charges Rs </label>
                                    <input type="text" id="flim_charges_total" name="flim_charges_total" readonly>

                                </div>
                    
                                

                                <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
    border-radius: 10px 10px 0px 0px;
    padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;">   Material Test Certificate ( MTC ) </p>
                                

                                <div class="card">

                                    
                                    <input type="radio" id="certificate_cost_free" value="Free_along_with_invoice" name="certificate_cost" required>
                                    <label for="certificate_cost_free"> Free along with invoice</label>

                                    <input type="radio"  id="no_certificate" value="No_certification" name="certificate_cost" required>
                                    <label for="no_certificate"> No Certificate </label>

                                    <div>

                                        <input type="radio"  id="certificate_cost_charge" value="Extra_Charges" name="certificate_cost" required>
                                        <label for="certificate_cost_charge"> Extra Charges Rs. </label>
                                        <select id="certificate_cost_amount" name="certificate_price"></select>

                                    </div>
                                

                        
                                </div>


                                <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
    border-radius: 10px 10px 0px 0px;
    padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;"> Samples or Proto Type </p>
                                

                                <div class="card">
                                    
                                    <input type="radio" id="no_charges" value="no_charges" name="sample" required>
                                    <label for="no_charges"> No Charges </label>

                                    <input type="radio" id="Free" value="Free_in_case_confirm_Order" name="sample" required>
                                    <label for="Free"> Free in case confirm Order </label>

                                    <input type="radio" id="sample_cha" value="Extra_Charges_Rs" name="sample" required>
                                    <label for="sample_cha"> Extra Charges Rs. </label>
                                    <input type="textbox" value="0" id="sample_price" name="sample_price">
                                

                        
                                </div>

                                <br>

                                <div class="card">

                                    

                                    
                                    <label for="checkbox1"> Final Total </label>
                                    <input type="textbox" name="final_item_total" id="final_item_total">



                        
                                </div>

                                <br>


                                <input type="submit" id="submitButton" style="background : #7b7e80; border : none; border-radius : 5px;" class="btn btn-info"  value="Add Item Code Order"> 

                                <br>
                                <br>
                                <br>


                                
                                
                            
                            </form>

                                <!-- Cards will be dynamically appended here -->

                           


                            </div>

                        </div>

                                


                        <h1 style="font-size: 18px;
                        font-weight: 700;
                        text-align: center;
                        margin-bottom: 14px;"> Item Orders Description </h1>

                        <div class="table-stats order-table ov-h">
                            <table class="table ">
                                <thead>
                                    <tr>
                                        <th class="serial">#</th>
                                        <th>Description</th>
                                        <th>Quantity </th>
                                        <th>Per Unit Amount</th>
                                        <th>Final Amount</th>
                                        <th class="no-print">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="submittedOrders">
                                  
                                </tbody>
                            </table>



                        <div class="">

                            <form id="form2">

                                {% csrf_token %}

                            <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
    border-radius: 10px 10px 0px 0px;
    padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;"> Industry </p>
                                

                            <div class="card">

                                <input type="radio" id="industry1" name="industry" required value="automotive">
                                <label for="industry1">Automotive</label>
                                
                                <input type="radio" id="industry2" name="industry" required value="auto_ancillary">
                                <label for="industry2">Auto Ancillary</label>
                                
                                <input type="radio" id="industry2" name="industry" required value="project">
                                <label for="industry2">Project</label>
                                
                                <input type="radio" id="industry3" name="industry" required value="sugar">
                                <label for="industry3">Sugar</label>
                                
                                <input type="radio" id="industry4" name="industry" required value="domestic_appliance">
                                <label for="industry4">Domestic Appliance</label>
                                
                                <input type="radio" id="industry5" name="industry" required value="process_equipmen">
                                <label for="industry5">Process Equipmen</label>
                                
                                <input type="radio" id="industry6" name="industry" required value="petro_chemica">
                                <label for="industry6">Petro Chemica</label>
                                
                                <input type="radio" id="industry7" name="industry" required value="food_equipmen">
                                <label for="industry7">Food Equipmen</label>
                                
                                <input type="radio" id="industry8" name="industry" required value="medical_device_equipement">
                                <label for="industry8">Medical Device & Equipement</label>
                                
                                <input type="radio" id="industry9" name="industry" required value="defence">
                                <label for="industry9">Defence</label>
                                
                                <input type="radio" id="industry10" name="industry" required value="aviation_aero_space">
                                <label for="industry10">Aviation & Aero Space</label>
                                
                                <input type="radio" id="industry11" name="industry" required value="elevator">
                                <label for="industry11">Elevator</label>
                                
                                <input type="radio" id="industry12" name="industry" required value="electricals">
                                <label for="industry12">Electricals</label>
                                
                                <input type="radio" id="industry13" name="industry" required value="electronics">
                                <label for="industry13">Electronics</label>
                                
                                <input type="radio" id="industry14" name="industry" required value="filteration">
                                <label for="industry14">Filteration</label>
                                

                            </div>

                            <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
    border-radius: 10px 10px 0px 0px;
    padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;"> Product </p>
                                

                            <div class="card">

                                <input type="radio" id="product1" name="product" required value="nameplate">
                                <label for="product1">Nameplate</label>
                                
                                <input type="radio" id="product2" name="product" required value="front_pannel">
                                <label for="product2">Front Panel</label>
                                
                                <input type="radio" id="product3" name="product" required value="nameplate_with_qr_code">
                                <label for="product3">Nameplate with QR Code</label>
                                
                                <input type="radio" id="product4" name="product" required value="project_based_cable_tags">
                                <label for="product4">Project Based Cable Tags</label>
                                
                                <input type="radio" id="product5" name="product" required value="schematic_drg">
                                <label for="product5">Schematic Drg</label>
                                
                                <input type="radio" id="product6" name="product" required value="thin_shim_and_spacer">
                                <label for="product6">Thin Shim & Spacer</label>
                                
                                <input type="radio" id="product7" name="product" required value="proto_type_stator_and_rotar_lamination">
                                <label for="product7">Proto type Stator & Rotar Lamination</label>
                                
                                <input type="radio" id="product8" name="product" required value="regular_thin_mesh">
                                <label for="product8">Regular Thin Mesh</label>
                                
                                <input type="radio" id="product9" name="product" required value="customized_mesh">
                                <label for="product9">Customized Mesh</label>
                                
                                <input type="radio" id="product10" name="product" required value="encoder_disc">
                                <label for="product10">Encoder Disc</label>
                                
                                <input type="radio" id="product11" name="product" required value="aperture_and_pin_holes">
                                <label for="product11">Aperture & Pin Holes</label>
                                
                                <input type="radio" id="product12" name="product" required value="texturing">
                                <label for="product12">Texturing</label>
                                
                                <input type="radio" id="product13" name="product" required value="speaker_grill">
                                <label for="product13">Speaker Grill</label>
                                
                                <input type="radio" id="product14" name="product" required value="contact_connector_and_terminals">
                                <label for="product14">Contact, Connector & Terminals</label>
                                
                                <input type="radio" id="product15" name="product" required value="valve_and_compressor_plate">
                                <label for="product15">Valve & Compressor Plate</label>
                                
                                <input type="radio" id="product16" name="product" required value="diaphragm">
                                <label for="product16">Diaphragm</label>
                                
                                <input type="radio" id="product17" name="product" required value="emi_rfi_shielding">
                                <label for="product17">EMI / RFI Shielding</label>
                                
                                <input type="radio" id="product18" name="product" required value="filteration">
                                <label for="product18">Filteration</label>
                                
                                <input type="radio" id="product19" name="product" required value="battery_contact">
                                <label for="product19">Battery Contact</label>
                                
                                <input type="radio" id="product20" name="product" required value="antenna_tele_communication">
                                <label for="product20">Antenna Tele Communication</label>
                                
                                <input type="radio" id="product21" name="product" required value="bipolar_plate_pem">
                                <label for="product21">Bipolar Plate PEM</label>
                                
                                <input type="radio" id="product22" name="product" required value="flat_spring_u_spring_v_spring">
                                <label for="product22">Flat Spring, U Spring, V Spring</label>
                                
                                <input type="radio" id="product23" name="product" required value="metal_business_card_with_nfc_chip">
                                <label for="product23">Metal Business Card with NFC Chip</label>
                                
                                <input type="radio" id="product24" name="product" required value="metal_business_card_without_chip">
                                <label for="product24">Metal Business Card without Chip</label>
                                
                                <input type="radio" id="product25" name="product" required value="book_mark_and_product_model">
                                <label for="product25">Book Mark & Product Model</label>
                                
                                <input type="radio" id="product26" name="product" required value="designer_stainless_steel_sheet">
                                <label for="product26">Designer Stainless Steel Sheet</label>
                                
                                <input type="radio" id="product27" name="product" required value="designer_stainless_steel_sheet_with_elevator_cabinet">
                                <label for="product27">Designer Stainless Steel Sheet with Elevator Cabinet</label>
                                
                                <input type="radio" id="product28" name="product" required value="designer_stainless_steel_sheet_with_elevator_cabinet_roof_and_bottom">
                                <label for="product28">Designer Stainless Steel Sheet with Elevator Cabinet, Roof & Bottom</label>
                                
                            </div>


                                
                            <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
    border-radius: 10px 10px 0px 0px;
    padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;"> Design format accepted </p>
                                

                            <div class="card">
                                <input type="radio" id="file_format1" name="file_format" value="cdr">
                                <label for="file_format1">CDR</label>
                                
                                <input type="radio" id="file_format2" name="file_format" value="dxf">
                                <label for="file_format2">DXF</label>
                                
                                <input type="radio" id="file_format3" name="file_format" value="ai">
                                <label for="file_format3">A.I</label>
                                
                                <input type="radio" id="file_format4" name="file_format" value="pdf">
                                <label for="file_format4">PDF</label>
                                
                                <input type="radio" id="file_format5" name="file_format" value="excel">
                                <label for="file_format5">Excel</label>
                                
                            </div>




                            <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
    border-radius: 10px 10px 0px 0px;
    padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;">    IncoTerm </p>
                                                    
                            
                            <div class="card">

                          
                                <input type="radio" id="inco_ex_works" name="incoterm" value="ex-works" required>
                                <label for="inco_ex_works">Ex-Works</label>
                            
                                <input type="radio" id="inco_fob" name="incoterm" value="f.o.b." required>
                                <label for="inco_fob">F.O.B.</label>
                            
                                <input type="radio" id="inco_c_and_f" name="incoterm" value="c_and_f" required>
                                <label for="inco_c_and_f">C & F</label>
                            
                                <input type="radio" id="inco_cif" name="incoterm" value="cif" required>
                                <label for="inco_cif">CIF</label>
                            
                                <input type="radio" id="inco_warehouse" name="incoterm" value="warehouse_to_warehouse" required>
                                <label for="inco_warehouse">Warehouse to Warehouse</label>
                            </div>

                            <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
    border-radius: 10px 10px 0px 0px;
    padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;">    Mode of Transport </p>
                                                                        
                                                
                            <div class="card">

                                <input type="radio" id="transport_road" name="transportation_type" value="road" required>
                                <label for="transport_road">Road</label>

                                <input type="radio" id="transport_rail" name="transportation_type" value="rail" required>
                                <label for="transport_rail">Rail</label>

                                <input type="radio" id="transport_air" name="transportation_type" value="air" required>
                                <label for="transport_air">Air</label>

                                <input type="radio" id="transport_courier" name="transportation_type" value="courier" required>
                                <label for="transport_courier">Courier</label>

                                <input type="radio" id="transport_porter" name="transportation_type" value="porter" required>
                                <label for="transport_porter">Porter</label>

                                <input type="radio" id="transport_personal" name="transportation_type" value="personal_pick_up" required>
                                <label for="transport_personal">Personal Pick Up</label>
                            </div>

                            <div class="card">

                                <label for="transportation_cost">Transportation Cost</label>
                                <select id="transportation_cost" name="transportation_cost" class="form-control" required></select>

                            </div>

                            

                            <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
    border-radius: 10px 10px 0px 0px;
    padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;">  Payment </p>
                            <div class="card">                 
                            <div>

                                
                                <input type="radio" id="advance_advance" value="advance" name="payment" required>

                                <label for="advance_advance"> Advance </label>

                                
                            </div>
                            <div style="display: flex; gap: 10px;"> <input type="number" id="advance" name="advance" class="form-control"> 

                                <label for="checkbox1" name="payment">    % of Advance </label>  
                                
                            </div>
                            </div>

                            
                            <div class="card">
                                <input type="radio" id="against_delivery" value="against_delivery" name="payment" required>
                                <label for="against_delivery">Against Delivery</label>
                                <input type="radio" id="proforma_invoice" value="proforma_invoice" name="payment" required>
                                <label for="proforma_invoice"> Proforma Invoice </label>
                                <input type="radio" id="credit_in_day" value="credit_in_day" name="payment" required>
                                <label for="credit_in_day"> Credit in day </label>

                                <input type="number" id="credit_in_days" name="credit_in_days" name="limit to 99" min="0" max="100">

                            </div>

                        <div>
                        <br>
                                                                            

                    </div>



                    <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
    border-radius: 10px 10px 0px 0px;
    padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;">   Credit Limit in INR </p>
                            

                    <div class="card">                 


                        <label for="checkbox1"> Amount <input type="number" id="credit_limit" name="credit_limit" class="form-control" required readonly> 
                    </div>

                    <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
    border-radius: 10px 10px 0px 0px;
    padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;">  Rejection Acceptance from the date of invoice </p>
            
                    
                    <div class="card">                 

                        <label for="rejection_acceptance">Days</label>
                        <select id="rejection_acceptance" name="rejection_acceptance" class="form-control">
                            <option value="1"> 1 </option>
                            <option value="2"> 2 </option>
                            <option value="3"> 3 </option>
                            <option value="4"> 4 </option>
                            <option value="5"> 5 </option>
                            <option value="6"> 6 </option>
                            <option value="7"> 7 </option>
                            <option value="8"> 8 </option>
                        </select>
                        
                    </div>


                    <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
    border-radius: 10px 10px 0px 0px;
    padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;">    Offer Valid Till </p>
                            

                    <div class="card">                 


                        <input type="date" name="offer_valid_date" class="form-control dateclas" required="" id="id_DC_date">
                    </div>


                    <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
    border-radius: 10px 10px 0px 0px;
    padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;">    Rate Contract For per Month procurement </p>
                            

                                                

                    <div class="card">
                        <input type="radio" id="Acceptance1" name="Acceptance">
                        <label for="Acceptance1">Yes</label>
                        <input type="radio" id="Acceptance2" name="Acceptance">
                        <label for="Acceptance2"> No </label>
                        
                    </div>



                    <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
    border-radius: 10px 10px 0px 0px;
    padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;"> In Case there is sudden rise of material price per unit will differ </p>
                            

                    <div class="card">                 

                        <input type="radio" id="sudden_rise_no" name="sudden_rise" value="No" required>
                        <label for="sudden_rise_no">No</label>
                        <input type="radio" id="sudden_rise1" name="sudden_rise" value="Yes" required>
                        <label for="sudden_rise1">Yes</label>
                        <input type="radio" id="sudden_rise2" name="sudden_rise" value="no" required>
                        <label for="sudden_rise2"> Price Rise in % </label>
                        <select id="sudden_rise_percent" name="sudden_rise_percent" class="from-control"> 
                            <option value="1"> 0 </option>
                            <option value="2"> 1 </option>
                            <option value="2"> 2 </option>
                            <option value="2"> 3 </option>
                            <option value="2"> 4 </option>
                            <option value="2"> 5 </option>
                            <option value="2"> 6 </option>
                            <option value="2"> 7 </option>
                            <option value="2"> 8 </option>
                            <option value="2"> 9 </option>
                            <option value="2"> 10 </option>
                            <option value="2"> 11 </option>
                            <option value="2"> 12 </option>
                            <option value="2"> 13 </option>
                            <option value="2"> 14 </option>
                            <option value="2"> 15 </option>
                            <option value="2"> 16 </option>
                            <option value="2"> 17 </option>
                            <option value="2"> 18 </option>
                            <option value="2"> 19 </option>
                            <option value="2"> 20 </option>
                            <option value="2"> 21 </option>
                            <option value="2"> 22 </option>
                            <option value="2"> 23 </option>
                            <option value="2"> 24 </option>
                            <option value="2"> 25 </option>
                            
                            </select>

                    </div>

                    <p style="color: white; text-align: center;color: white;margin-bottom: 0px;
    border-radius: 10px 10px 0px 0px;
    padding: 5px;text-align: left; padding-left: 18px; background: #003366;font-weight: 600; margin-top: 14px;">  Packaging and Forwarding </p>
                            

                        

                    <div class="card">


                        <label for="packaging">Type of Packaging</label>

                        <select id="packaging" name="packaging" class="form-control">
                            <option value="paper"> Paper </option>
                            <option value="plastic_bags"> Plastic Bags </option>
                            <option value="corrugated_box"> Corrugated Box </option>
                            <option value="wooden_box"> Wooden Box  </option>
                        </select>



                        <label for="packaging_charges">Packaging Charges</label>

                        <select id="packaging_charges" name="packaging_charges" class="form-control"></select>
                    
            
            

                    </div>

                    <div class="card">


                        <label for="total_sqinch">Total Sqinch</label>

                        <input type="text" id="total_sqinch" name="total_sqinch" class="form-control">

                        <label for="final_amount">Final Amount</label>

                        <input type="text" id="final_amount" name="final_amount" class="form-control">
                    
            
            

                    </div>


                </div>
                        
            </div>
        </div>


                    
        <br>
        <br>
            <input type="submit" id="payment-button"  value="Add Qutation" type="submit" style="width: 100%; margin-top: 25px; background : #7b7e80; border : none; border-radius : 5px;" class="btn btn-info">
    </div>
</form>


  <!-- Popup Modal -->
  <div class="modal fade" id="popupFormModal" tabindex="-1" role="dialog" aria-labelledby="popupFormModalLabel" aria-hidden="true">


    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
                <h5 class="modal-title" id="popupFormModalLabel">Add New Customer</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <!-- Modal Body -->
            <div class="modal-body">
                <form id="popupForm" method="post">
                    {% csrf_token %}

                    <!-- Name Field -->
                    <div class="form-group">
                        <label for="customerName">Name</label>
                        <input type="text" class="form-control" id="customerName" name="name" placeholder="Enter customer name" required>
                    </div>

                    <!-- Client GST Field -->
                    <div class="form-group">
                        <label for="clientGst">Client GST</label>
                        <input type="text" class="form-control" id="clientGst" name="client_gst" placeholder="Enter GST number">
                    </div>

                    <!-- Address Field -->
                    <div class="form-group">
                        <label for="customerAddress">Address</label>
                        <textarea class="form-control" id="customerAddress" name="address" placeholder="Enter address" rows="3"></textarea>
                    </div>

                    <!-- Mobile Number Field -->
                    <div class="form-group">
                        <label for="mobileNumber">Mobile No</label>
                        <input type="tel" class="form-control" id="mobileNumber" name="mobile_no" placeholder="Enter mobile number" pattern="[0-9]{10}">
                    </div>

                    <!-- Credit Limit Field -->
                    <div class="form-group">
                        <label for="creditLimit">Credit INR</label>
                        <input type="number" class="form-control" id="creditLimit" name="credit_limit" placeholder="Enter credit limit">
                    </div>

                    <!-- Submit Button -->
                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>
            </div>
        </div>
    </div>
</div>




{% endblock content %}

{% block js %}
    



<script>



    function calculateSqIn() {
        // Get the length and width in mm from the input fields
        const lengthMm = parseFloat(document.getElementById('length_a').value);
        const widthMm = parseFloat(document.getElementById('width_a').value);
        const quantity = parseFloat(document.getElementById('quantity_a').value);
        const mm_inch_select = document.getElementById('mm_inch_select').value;
        

        if(mm_inch_select == "2"){
        // Check if the inputs are valid numbers
        if (!isNaN(lengthMm) && !isNaN(widthMm)) {
            // Convert mm to inches (1 inch = 25.4 mm)
          
            
            // Calculate square inches
            const sqIn = lengthMm * widthMm * quantity;
            
            // Display the result in the "size" input field
            document.getElementById('total_sq_inch').value = sqIn.toFixed(2);


                
            calculatedValue = sqIn.toFixed(2)



            var radioButtons =document.getElementsByName('sqinch');

            let closestDifference = Infinity;
            let closestButton = null;

            if (parseInt(calculatedValue) <= 144) {


                var checkbox2 = document.getElementById("checkbox144");
                
                // Check the checkbox
                checkbox2.checked = true;

            }

            else{

                for (const radioButton of radioButtons) {
                    const value = parseFloat(radioButton.value);
                    const difference = calculatedValue - value;
                    if (difference >= 0 && difference < closestDifference) {
                        closestDifference = difference;
                        closestButton = radioButton;
                    }
                }

                if (closestButton) {
                    closestButton.checked = true;
                }
                
            }


            } else {
                // Display an error message if inputs are not valid numbers
            }

        }

        else{
            

            if (!isNaN(lengthMm) && !isNaN(widthMm)) {
                // Convert mm to inches (1 inch = 25.4 mm)
                var lengthIn = (lengthMm / 2.5) / 10;
                var widthIn = (widthMm / 2.5) / 10;

                
                // Calculate square inches
                var sqIn1 = lengthIn * widthIn * quantity;

                sqIn = sqIn1 + ((sqIn1 / 100) * 5)
                
                // Display the result in the "size" input field
                document.getElementById('total_sq_inch').value = sqIn.toFixed(2);

                var calculatedValue = sqIn.toFixed(2)

                var radioButtons =document.getElementsByName('sqinch');

                let closestDifference = Infinity;
                let closestButton = null;


                if (parseInt(calculatedValue) <= 144) {


                    var checkbox2 = document.getElementById("checkbox144");
                    
                    // Check the checkbox
                    checkbox2.checked = true;
    
                }
    
                else{
    
        

                    for (const radioButton of radioButtons) {
                        const value = parseFloat(radioButton.value);
                        const difference = calculatedValue - value;
                        if (difference >= 0 && difference < closestDifference) {
                            closestDifference = difference;
                            closestButton = radioButton;
                        }
                    }

                    if (closestButton) {
                        closestButton.checked = true;
                    }

                }

            } else {
                // Display an error message if inputs are not valid numbers
                
            }
        }


    }

   


        document.getElementById('length_a').addEventListener('input', calculateSqIn);

        document.getElementById('length_a').addEventListener('input', calculateSqIn);
        document.getElementById('width_a').addEventListener('input', calculateSqIn);
        document.getElementById('quantity_a').addEventListener('input', calculateSqIn);
        document.getElementById('mm_inch_select').addEventListener('input', calculateSqIn);
        

        const dropdown = document.getElementById('below_moq');

        // Loop to generate options from 1 to 143
        for (let i = 1; i <= 143; i++) {
            // Create an option element
            const option = document.createElement('option');
            // Set the value of the option
            option.value = i;
            // Set the text content of the option
            option.textContent = i;
            // Append the option to the dropdown
            dropdown.appendChild(option);
        }


        var get_value_total = 0

        function getValue() {

            // Check if all required inputs are selected
            const thicknessInput = document.querySelector('input[name="thickness"]:checked');
            const sqInchInput = document.querySelector('input[name="sqinch"]:checked');
            const colorInput = document.querySelector('input[name="color_count"]:checked');
            const textMatterInput = document.querySelector('input[name="text_matter"]:checked');
            const etchingInput = document.querySelector('input[name="etching"]:checked');

                


            if (thicknessInput && sqInchInput && colorInput && textMatterInput && etchingInput) {

                const thickness = document.querySelector('input[name="thickness"]:checked').value;
                    
                const sqInch = document.querySelector('input[name="sqinch"]:checked').value;

                const color = document.querySelector('input[name="color_count"]:checked').value;

                const text_matter = document.querySelector('input[name="text_matter"]:checked').value;

                const etching = document.querySelector('input[name="etching"]:checked').value;
                
                const process = document.querySelector('input[name="process"]:checked').value;


                const baseUrl = window.location.origin; // Get the base URL (e.g., http://example.com)
const url = new URL("{% url 'get_psi' %}", baseUrl); // 
                url.searchParams.append('thickness', thickness);
                url.searchParams.append('sqInch', sqInch);
                url.searchParams.append('color', color);
                url.searchParams.append('text_matter', text_matter);
                url.searchParams.append('etching', etching);
                url.searchParams.append('process', process);
                console.log(url)
                fetch(url)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(tableData => {
                    // Check if the value is present
                    if (tableData && tableData.value !== undefined) {
                        const value = tableData.value;
                        // Use the retrieved value as needed
                        console.log('Retrieved value:', value);
                        // Display the value
                        total_sq_inch = document.getElementById("total_sq_inch").value;
                        quantity_a = document.getElementById("quantity_a").value;
                        var price = value * total_sq_inch
                        var final_price = price / quantity_a
                        document.getElementById("rate").value = value;
                        document.getElementById("total_rate").value = final_price.toFixed(2);
                        document.getElementById("total_basic_amount").value = final_price.toFixed(2) * quantity_a;
                        
                        get_value_total = final_price.toFixed(2) * quantity_a

                        update_other_values();


                    }else {
                        alert('No data available for the given inputs.');
                    }
                })
                .catch(error => {
                    console.error('There was a problem with the fetch operation:', error);



            });
        }


        
                
            }
       


        var final_pri = 0




// Get all radio buttons in the group



function update_other_values(){

    console.log('sdhjshduhsd')
    
    var other_total = 0

    
    other_total = get_value_total

    console.log(other_total)

   


    var sdsd = document.getElementById('sqinch_flim_option');
    var selectElement1212 = document.getElementById('sqinch');


    // Function to update the final item total
    if (sdsd.checked) {
        var selectedValue = selectElement1212.value;
        selectedValue = parseFloat(selectedValue) * 1.5; // Increment final_pri by the selected value
        other_total += parseFloat(selectedValue); // Increment final_pri by the selected value
        document.getElementById("final_item_total").value = other_total.toFixed(2);
        document.getElementById("flim_charges_total").value = selectedValue;
    }
    else{

        document.getElementById("final_item_total").value = other_total.toFixed(2);
        document.getElementById("flim_charges_total").value = '0';

    }
    
    console.log(other_total)


   // Get all radio buttons in the group

   var chargeRadioButton = document.getElementById('certificate_cost_charge');
   var selectElement1212 = document.getElementById('certificate_cost_amount');
   
   // Function to update the final item total
    if (chargeRadioButton.checked) {
        var selectedValue = selectElement1212.value;
        console.log(other_total)
        console.log(selectedValue)
        other_total += parseFloat(selectedValue); // Increment final_pri by the selected value
        console.log(other_total)

    }
    document.getElementById("final_item_total").value = other_total.toFixed(2);

    console.log(other_total)



    const sample_price = document.getElementById('sample_price');

    var chargeRadioButton = document.getElementById('sample_cha');

    
    // Function to update the final item total

    if (chargeRadioButton.checked) {
        var selectedValue = sample_price.value;
        other_total += parseFloat(selectedValue); // Increment final_pri by the selected value
    }
    document.getElementById("final_item_total").value = other_total.toFixed(2);
    console.log(other_total)


    var chargeRadioButton2 = document.getElementById('with_material_gst');
    var chargeRadioButton1 = document.getElementById('with_job_shop_radio');


    var total_charges = 0
    var basic_amount = 0
    
    // Check if the event object exists and has the target property
    if (chargeRadioButton1.checked) {


        // Call your function here
        var basic_amount = parseFloat(document.getElementById("total_basic_amount").value);
        const amount_with_gst = (basic_amount / 100) * 12;

        total_charges = amount_with_gst

        document.getElementById("total_with_job_shop").value = amount_with_gst.toFixed(2);
        document.getElementById("total_with_gst").value = "";

        var total_amount_with_charges_type = basic_amount + total_charges

        // Round total_amount_with_charges_type to two decimal places
        const roundedValue = Math.round(total_amount_with_charges_type * 100) / 100;

        // Set the rounded value as the value of the specified element
        document.getElementById("total_amount_with_charges_type").value = roundedValue;

        other_total += total_charges

        document.getElementById("final_item_total").value = other_total.toFixed(2);
    
        console.log('here')
        console.log(other_total)

    }
    if (chargeRadioButton2.checked) {


        // Call your function here
        var basic_amount = parseFloat(document.getElementById("total_basic_amount").value);
        const amount_with_gst = (basic_amount / 100) * 18;

        total_charges = amount_with_gst

        document.getElementById("total_with_gst").value = amount_with_gst.toFixed(2);
        document.getElementById("total_with_job_shop").value = "";

        var total_amount_with_charges_type = basic_amount + total_charges

        // Round total_amount_with_charges_type to two decimal places
        const roundedValue = Math.round(total_amount_with_charges_type * 100) / 100;

        // Set the rounded value as the value of the specified element
        document.getElementById("total_amount_with_charges_type").value = roundedValue;

        other_total += total_charges

        document.getElementById("final_item_total").value = other_total.toFixed(2);

        console.log('here')
        console.log(other_total)

    }

            

    var advance_advance = document.getElementById("advance_advance").checked;

    if (!advance_advance) {
        document.getElementById('advance').value = '';
    }

    var credit_in_day = document.getElementById("credit_in_day").checked;

    if (!credit_in_day) {
        document.getElementById('credit_in_days').value = '';
    }

    var sudden_rise2 = document.getElementById("sudden_rise2").checked;

    if (!sudden_rise2) {
        document.getElementById('sudden_rise_percent').value = '0';
    }

    var sqinch_flim_option = document.getElementById("sqinch_flim_option").checked;

    if (!sqinch_flim_option) {
        document.getElementById('sqinch').value = '0';
        document.getElementById('flim_charges_total').value = '0';
    }

    var certificate_cost_charge = document.getElementById("certificate_cost_charge").checked;

    if (!certificate_cost_charge) {
        document.getElementById('certificate_cost_amount').value = '0';
    }

    var sample_cha = document.getElementById("sample_cha").checked;

    if (!sample_cha) {
        document.getElementById('sample_price').value = '0';
    }

}













      

// Get the select element
const selectElement = document.getElementById("transportation_cost");

// Add options to the select element
for (let i = 0; i <= 10000; i += 100) {
    const option = document.createElement("option");
    option.text = i;
    option.value = i;
    selectElement.add(option);
}

// Get the select element
const selectElement1 = document.getElementById("packaging_charges");


// Add options to the select element
for (let i = 0; i <= 5000; i += 100) {
    const option = document.createElement("option");
    option.text = i;
    option.value = i;
    selectElement1.add(option);
}
      

// Get the select element
const selectElement2 = document.getElementById("sqinch");


// Add options to the select element
for (let i = 0; i <= 600; i += 100) {
    const option = document.createElement("option");
    option.text = i;
    option.value = i;
    selectElement2.add(option);
}
      


// Get the select element
const selectElement4 = document.getElementById("certificate_cost_amount");


// Add options to the select element
for (let i = 0; i <= 1000; i += 100) {
    const option = document.createElement("option");
    option.text = i;
    option.value = i;
    selectElement4.add(option);
}
      






var cardsAppended = 0;








let orders = []; // Array to store submitted orders
let orderIdCounter = 1; // Counter for unique order IDs

// Function to add submitted order to the array
function addOrder(orderData) {
    orderData.id = orderIdCounter++;
    orders.push(orderData);
    renderOrders(); // Render submitted orders

    calculateTotal();


}

// Function to render submitted orders
function renderOrders() {
    const ordersContainer = document.getElementById('submittedOrders');
    ordersContainer.innerHTML = ''; // Clear existing content

    orders.forEach(order => {
        
        const orderElement = document.createElement('tr');
        orderElement.classList.add('ssdsds');
        orderElement.innerHTML =  ` <td> Item Code:- ${order.item_code} <hr> <hr>  
        Material: ${order.material} <hr> <hr> 
        Process: ${order.process} <hr> <hr> 
        Size: ${order.total_sq_inch} <hr> <hr> 
        Text Matter: ${order.text_matter} <hr> <hr> 
        Type of Etching: ${order.etching} <hr> <hr> 
        Color: ${order.color} <hr> <hr> 
        Flim Charges: ${order.flim_charges_total} <hr> <hr> 
        Font: ${order.font_height} <hr> <hr> 
        Material Test Certificate: ${order.certificate_price} <hr> <hr> 
        Sample/Prototype: ${order.sample_price} <hr> <hr> 
        With GST: ${order.total_amount_with_charges_type} <hr> <hr> 
           </td>
        <td> what will be here? </td>

        <td> ${order.quantity}</td>
        <td> ${order.rate_per_unit}</td>
        <td> ${order.final_item_total} </td>
        <td class="no-print" style="white-space: nowrap;"> <a onclick="editOrder(${order.id})"  style="font-weight: 600; color: black; border: none; margin-right: 10px;" 
                                           class="btn btn-primary">View</a>
          
            <a onclick="deleteOrder(${order.id})"  style="background: red; font-weight: 600; color: black; border: none;" 
                                           class="btn btn-primary">Delete</a></td>

         
        
        `;


        ordersContainer.appendChild(orderElement);
    });
}

// Function to delete submitted order
function deleteOrder(orderId) {
    orders = orders.filter(order => order.id !== orderId);
    renderOrders(); // Render updated list

    calculateTotal();

}

// Function to edit submitted order
function editOrder(orderId) {
    const orderToEdit = orders.find(order => order.id === orderId);
    if (orderToEdit) {
        // Populate form with order data for editing
        const form = document.getElementById('orderForm');
        for (const key in orderToEdit) {
            if (Object.hasOwnProperty.call(orderToEdit, key)) {
                const element = form.elements[key];
                if (element) {
                    element.value = orderToEdit[key];
                }
            }
        }

        select_qr_inc();

        // Store the ID of the order being edited
        document.getElementById('editOrderId').value = orderId;
    }
}



function select_qr_inc(){

    
    let calculatedValue = parseFloat(document.getElementById('total_sq_inch').value);
    let radioButtons = document.getElementsByName('sqinch');

    

    let closestHigherButton = null;
    let highestButton = null;
    let highestValue = -Infinity;

    for (const radioButton of radioButtons) {
        const value = parseFloat(radioButton.value);
        console.log(`Checking Radio Value: ${value}`);

        if (!isNaN(value)) {
            if (value >= calculatedValue && closestHigherButton === null) {
                closestHigherButton = radioButton; // Select the first (smallest) higher value
            }
            if (value > highestValue) {
                highestValue = value;
                highestButton = radioButton; // Store the highest available button
            }
        }
    }

   

    if (closestHigherButton) {
        closestHigherButton.checked = true;
    } else if (highestButton) {
        highestButton.checked = true;
    } else {
        console.warn("No suitable radio button found!");
    }


}



// Function to handle adding a new order
function addNewOrder(orderData) {
    // Add submitted order to the array
    
    document.getElementById('editOrderId').value = '';

    addOrder({ ...orderData });
}

// Function to handle editing an existing order
function editExistingOrder(orderData) {
    // Check if we are editing an existing order
    const editOrderId = parseInt(document.getElementById('editOrderId').value);

    if (editOrderId) {
        // Find the index of the order to be edited
        const index = orders.findIndex(order => order.id === editOrderId);
        if (index !== -1) {
            // Update existing order
            orders[index] = { id: editOrderId, ...orderData };
            renderOrders(); // Render updated list
        }
    }
}

// Function to handle form submission
function handleSubmit(event) {
    event.preventDefault(); // Prevent default form submission

    // Retrieve form data
    const formData = new FormData(document.getElementById('orderForm'));

    // Convert FormData object to a plain object
    const orderData = {};
    formData.forEach((value, key) => {
        orderData[key] = value;
    });

    // Check if we are editing an existing order
    const editOrderId = parseInt(document.getElementById('editOrderId').value);
    console.log('Edit Order ID:', editOrderId); // Log editOrderId to check its value



    if (editOrderId) {
        editExistingOrder(orderData);
    } else {
        addNewOrder(orderData);
    }

    // Clear form fields
    document.getElementById('editOrderId').value = '';
    function resetFormExcept(idsToExclude) {
        const form = document.getElementById('orderForm');
        const elements = form.elements;
    
        for (let i = 0; i < elements.length; i++) {
            const element = elements[i];
            if (!idsToExclude.includes(element.id)) {
                if (element.type === 'checkbox' || element.type === 'radio') {
                    element.checked = false;
                } else if (element.tagName === 'SELECT') {
                    // For select elements, reset to the first option
                    element.selectedIndex = 0;
                } else {
                    element.value = '';
                }
            }
        }
    }
    
    // Usage
    resetFormExcept(['order_id', 'date', 'conctc', 'webs', 'mailrt', 'submitButton', 'Customer', 'contance_person_no', 'contact_no', 'email', 'client_gst']);

    calculateTotal();

}

// Initialize event listener for form submission
document.getElementById('orderForm').addEventListener('submit', handleSubmit);






function calculateTotal() {




    var final_sqinch = orders.reduce((acc, obj) => acc + parseFloat(obj.total_sq_inch), 0);

    document.getElementById('total_sqinch').value = final_sqinch


    var totalFinalAmount = orders.reduce((acc, obj) => acc + parseFloat(obj.final_item_total), 0);

    var packagingCharges = parseFloat(document.getElementById("packaging_charges").value);
    var finalAmount = totalFinalAmount + parseFloat(packagingCharges);

    var transportation_cost = parseFloat(document.getElementById("transportation_cost").value);
    finalAmount = finalAmount + parseFloat(transportation_cost);

    console.log(final_sqinch)
    console.log(finalAmount)

    
    


    // Check if finalAmount is a number before calling toFixed
    if (!isNaN(finalAmount)) {
        document.getElementById("final_amount").value = finalAmount;
    } else {
        // Handle the case where finalAmount is not a number
        document.getElementById("final_amount").value = "Invalid input";
    }
}


// Add event listeners to all input fields in the form

const formInputsasas = document.querySelectorAll('input, select');
formInputsasas.forEach(input => {
  input.addEventListener('change', getValue);
  input.addEventListener('change', calculateTotal);
});



$(document).ready(function(){
    $('#form2').submit(function(e){
        $("#loader-overlay").show();

        
        e.preventDefault(); // Prevent default form submission
        alert("done")

        var final_sqinch = orders.reduce((acc, obj) => acc + parseFloat(obj.total_sq_inch), 0);

        document.getElementById("payment-button").disabled = true;


        
        // Gather form data
        var formData = $(this).serializeArray();
        
        // Gather form data from form3
        var formData3 = $('#form3').serializeArray();
        
        // Additional array data
        
        // Append form data from form3 to form data from form2
        formData = formData.concat(formData3);
        // Additional array data    
        
        // Append array data to form data
        formData.push({name: 'orders', value: JSON.stringify(orders)});

      

        console.log(formData)

        // Send data via POST request
        $.ajax({
            url: $(this).attr('action'),
            type: 'POST',
            data: formData,
           
            success: function(response) {
                if (response.success) {
                    // Handle success
                    console.log(response.message);
                    window.location.href = "{% url 'list_order' %}";
                } else {
                    // Handle form errors
                    const errorContainer = $(".sufee-alert");
                    const errorMessage = $("#errorMessage");
        
                    // Clear previous errors
                    errorMessage.html("");

                    alert('sdsd')

                    console.log(response)
        
                    // Display new errors
                    $.each(response.errors, function(field, messages) {
                        messages.forEach(function(message) {
                            errorMessage.append(`${field}: ${message}`);
                        });
                    });
        
                    // Show the error alert
                    errorContainer.show();
                }
            },
            error: function(xhr, status, error) {
                
                $("#loader-overlay").hide();

        document.getElementById("payment-button").disabled = false;


                // Handle general error (e.g., server issues)
                console.error(xhr.responseText);
        
                const errorContainer = $(".sufee-alert");
                const errorMessage = $("#errorMessage");
        
                errorMessage.html("An unexpected error occurred. Please try again.");
                errorContainer.show();
            }
        });
    });
});

















        $(document).ready(function () {
            // Show the modal when the add button is clicked
            $('#addButton').click(function () {
                $('#popupFormModal').modal('show');
            });

            // Validate and submit the form
            $('#popupForm').submit(function (e) {
                // Prevent default form submission
                e.preventDefault();
            
                alert("dfgvhjkjhg");
            
                // Perform AJAX request here
                $.ajax({
                    url: "{% url 'add_sales_customer_json' %}",  // Change this to your endpoint URL
                    type: 'POST',
                    data: $(this).serialize(),
                        success: function (response) {
                            console.log('Form submitted successfully:', response);
                            $('#popupFormModal').modal('hide');

                            const newCustomer = response.customer;
                            console.log('Form submitted successfully:', newCustomer);
    
                            // Hide the modal
    
                            // Update the dropdown with the new customer
                            const $dropdown = $('#customer');
                            $dropdown.append(new Option(newCustomer.name, newCustomer.id));
                            alert(newCustomer.credit_limit)

                            document.getElementById('credit_limit').value = newCustomer.credit_limit;


                        },
                        error: function (xhr, status, error) {
                            console.error('Form submission error:', error);
                        }
                    });
            });


            $('#customer').change(function (e) {
                const customerId = $(this).val();
                if (customerId) {
                    $.ajax({
                        url: "{% url 'get_customer_details' customer_id=123 %}".replace('123', customerId),
                        type: 'GET',
                        success: function (response) {
                            const customer = response.customer;
                            $('#credit_limit').val(customer.credit_limit);
                        },
                        error: function (xhr, status, error) {
                            console.error('Error fetching customer details:', error);
                        }
                    });
                } 
            });


        });






</script>




{% endblock js %}